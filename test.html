<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Test URL Parser</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-url {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border: 2px solid #ddd;
      word-break: break-all;
    }
    .result {
      background: #e8f5e9;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #4caf50;
    }
    button {
      background: #0077cc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    #demo {
      margin-top: 20px;
      border: 2px solid #333;
      display: inline-block;
    }
  </style>
</head>
<body>
  <h1>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ URL Parser</h1>
  
  <h2>–¢–µ–∫—É—â–∏–π URL:</h2>
  <div class="test-url" id="currentUrl"></div>
  
  <h2>–¢–µ—Å—Ç–æ–≤—ã–µ URL:</h2>
  <button onclick="testSimple()">–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç</button>
  <button onclick="testFull()">–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
  <button onclick="testVariables()">–° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏</button>
  
  <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:</h2>
  <div class="result">
    <pre id="result">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ç–µ—Å—Ç–∞</pre>
  </div>
  
  <h2>SVG Preview:</h2>
  <div id="demo"></div>
  
  <script type="module">
    import { parseURLParams, urlParamsToOptions } from './src/url-parser.js';
    import { createMultilineBlockTypingSVG } from './src/typing-svg.js';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
    document.getElementById('currentUrl').textContent = window.location.href;
    
    // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–∞—Ä—Å–∏–º –∏—Ö
    const urlParams = parseURLParams();
    if (Object.keys(urlParams).length > 0) {
      const options = urlParamsToOptions(urlParams);
      document.getElementById('result').textContent = JSON.stringify(options, null, 2);
      
      // –°–æ–∑–¥–∞–µ–º SVG
      try {
        createMultilineBlockTypingSVG(options);
      } catch (error) {
        document.getElementById('result').textContent += '\n\n–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è SVG:\n' + error.message;
      }
    }
    
    window.testSimple = function() {
      const testUrl = window.location.origin + window.location.pathname + 
        '?lines=Hello+World&fontSize=32&color=0077cc';
      window.location.href = testUrl;
    }
    
    window.testFull = function() {
      const testUrl = window.location.origin + window.location.pathname + 
        '?lines=Line+1;Line+2;Line+3' +
        '&fontSize=20' +
        '&color=1A5975' +
        '&background=81BECE' +
        '&width=1000' +
        '&height=100' +
        '&center=true' +
        '&typingMode=static' +
        '&eraseMode=fade' +
        '&multiLine=false' +
        '&printSpeed=50';
      window.location.href = testUrl;
    }
    
    window.testVariables = function() {
      const testUrl = window.location.origin + window.location.pathname + 
        '?lines=' + encodeURIComponent('Today is $DATE{weekday: long, month: long, day: numeric}') +
        '&fontSize=24' +
        '&color=333333';
      window.location.href = testUrl;
    }
  </script>
</body>
</html>

